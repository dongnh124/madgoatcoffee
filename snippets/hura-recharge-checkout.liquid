<style>
  .shipping_interval_frequency, .shipping_interval_unit_type, .number_charges_until_expiration {
    display: none;
  }
</style>
<script>
  const cart = {{ cart | json }};

  function reChargeProcessCart() {
    function get_cookie(name){ return( document.cookie.match('(^|; )'+name+'=([^;]*)')||0 )[2] }
    do {
      token=get_cookie('cart');
    }
    while(token == undefined);
    var myshopify_domain='{{ shop.permanent_domain }}'
    try {
      var ga_linker = ga.getAll()[0].get('linkerParam')
    } catch(err) {
      var ga_linker =''
    }
    checkout_url = "https://checkout.rechargeapps.com/r/checkout?myshopify_domain="+myshopify_domain+"&cart_token="+token+"&"+ga_linker;
    return checkout_url
  }

  $(document).on('click', '.cart__checkout', function (event) {
    let isSubscriptions = false
    cart.items.forEach(item => {
      if (item.properties['shipping_interval_frequency']) {
        isSubscriptions = true
      }
    })
    if (isSubscriptions) {
      const checkout_url = reChargeProcessCart()
      event.preventDefault();
      window.location.href = checkout_url;
    }
  });
</script>